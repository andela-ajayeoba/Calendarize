"use strict";var ApplicationConfiguration=function(){var applicationModuleName="calendarize",applicationModuleVendorDependencies=["ngResource","ngCookies","ngAnimate","ngTouch","ngSanitize","ui.router","ui.bootstrap","ui.utils","gantt","nsPopover"],registerModule=function(moduleName,dependencies){angular.module(moduleName,dependencies||[]),angular.module(applicationModuleName).requires.push(moduleName)};return{applicationModuleName:applicationModuleName,applicationModuleVendorDependencies:applicationModuleVendorDependencies,registerModule:registerModule}}();angular.module(ApplicationConfiguration.applicationModuleName,ApplicationConfiguration.applicationModuleVendorDependencies),angular.module(ApplicationConfiguration.applicationModuleName).config(["$locationProvider",function($locationProvider){$locationProvider.hashPrefix("!")}]),angular.element(document).ready(function(){"#_=_"===window.location.hash&&(window.location.hash="#!"),angular.bootstrap(document,[ApplicationConfiguration.applicationModuleName])}),ApplicationConfiguration.registerModule("calendarizes"),ApplicationConfiguration.registerModule("core"),ApplicationConfiguration.registerModule("users"),angular.module("calendarizes").run(["Menus",function(Menus){Menus.addMenuItem("topbar","Calendarizes","calendarizes","dropdown","/calendarizes(/create)?"),Menus.addSubMenuItem("topbar","calendarizes","List Calendarizes","calendarizes"),Menus.addSubMenuItem("topbar","calendarizes","New Calendarize","calendarizes/create")}]),angular.module("calendarizes").config(["$stateProvider",function($stateProvider){$stateProvider.state("listWorkers",{url:"/workers",templateUrl:"modules/calendarizes/views/list-workers.client.view.html"}).state("createWorker",{url:"/workers/create",templateUrl:"modules/calendarizes/views/create-worker.client.view.html"}).state("viewWorker",{url:"/workers/:workerId",templateUrl:"modules/calendarizes/views/view-worker.client.view.html"}).state("editWorker",{url:"/workers/:workerId/edit",templateUrl:"modules/calendarizes/views/edit-worker.client.view.html"}).state("listProjects",{url:"/projects",templateUrl:"modules/calendarizes/views/list-projects.client.view.html"}).state("createProject",{url:"/projects/create",templateUrl:"modules/calendarizes/views/create-project.client.view.html"}).state("viewProject",{url:"/projects/:projectId",templateUrl:"modules/calendarizes/views/view-project.client.view.html"}).state("editProject",{url:"/projects/:projectId/edit",templateUrl:"modules/calendarizes/views/edit-project.client.view.html"}).state("listAssignments",{url:"/assignments",templateUrl:"modules/calendarizes/views/list-assignments.client.view.html"}).state("createAssignment",{url:"/assignments/create",templateUrl:"modules/calendarizes/views/create-assignment.client.view.html"}).state("viewAssignment",{url:"/assignments/:assignmentId",templateUrl:"modules/calendarizes/views/view-assignment.client.view.html"}).state("editAssignment",{url:"/assignments/:assignmentId/edit",templateUrl:"modules/calendarizes/views/edit-assignment.client.view.html"}).state("projectsTimeline",{url:"/timeline/projects",templateUrl:"modules/calendarizes/views/projects-view.client.view.html"}).state("workersTimeline",{url:"/timeline/workers",templateUrl:"modules/calendarizes/views/workers-view.client.view.html"})}]),angular.module("calendarizes").controller("CalendarizesController",["$scope","$modal","$stateParams","$location","$timeout","Authentication","Apicall","Uuid","Sample","moment","GANTT_EVENTS","$log",function($scope,$modal,$stateParams,$location,$timeout,Authentication,Apicall,Uuid,Sample,moment,GANTT_EVENTS){$scope.authentication=Authentication,$scope.open=function(){$modal.open({templateUrl:"myModalContent.html",controller:"CalendarizesController",size:"sm",resolve:{projects:function(){return $scope.projects}}})},$scope.addPerson=function(){var person=new Apicall.Persons($scope.person);person.$save(function(response){$scope.msg="Person Successfully added",$scope.person="";var newData=[{id:response._id,name:response.name,tasks:[]}];$scope.loadData(newData)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.removePerson=function(person){if(person){person.$remove();for(var i in $scope.persons)$scope.persons[i]===person&&$scope.persons.splice(i,1)}else $scope.person.$remove(function(){})},$scope.updatePerson=function(){var person=$scope.person;person.$update(function(){},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.findPersons=function(){var data=[];$scope.persons=Apicall.Persons.query({},function(){$scope.persons.forEach(function(result){var $result={};$result.tasks=[],$result.id=result._id,$result.name=result.name,result.tasks.forEach(function(task){var $task={};$task.id=task._id,$task.name=task.projectName,$task.from=task.startDate,$task.to=task.endDate,$result.tasks.push($task)}),data.push($result)}),$scope.loadData(data)})},$scope.findPersons(),$scope.findOnePerson=function(){$scope.person=Apicall.Persons.get({personId:$stateParams.personId})},$scope.addProject=function(){var project=new Apicall.Projects($scope.project);project.$save(function(response){console.log("Project Successfully added"),console.log(response),$scope.project=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.removeProject=function(project){if(project){project.$remove();for(var i in $scope.projects)$scope.projects[i]===project&&$scope.projects.splice(i,1)}else $scope.project.$remove(function(){})},$scope.updateProject=function(){var project=$scope.project;project.$update(function(){},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.findProjects=function(){console.log(5555),$scope.projects=Apicall.Projects.query()},$scope.projectlist={},$scope.findOneProject=function(){$scope.project=Apicall.Projects.get({projectId:$stateParams.projectId})},$scope.createTask=function(){console.log("createtask");var task=new Apicall.Tasks($scope.task);task.$save(function(){$scope.task=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.findOneTask=function(){$scope.task=Apicall.Tasks.get({})},$scope.updateTask=function(){var task=$scope.task;task.$update(function(){},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.findTasks=function(){$scope.tasks=Apicall.Tasks.query()},$scope.options={mode:"custom",scale:"day",maxHeight:!1,width:!1,autoExpand:"both",taskOutOfRange:"expand",fromDate:void 0,toDate:void 0,showLabelsColumn:!0,currentDate:"line",currentDateValue:new Date(2014,9,23,11,20,0),draw:!1,readOnly:!1,filterTask:void 0,filterRow:void 0,allowLabelsResizing:!0,timeFrames:{day:{start:moment("8:00","HH:mm"),end:moment("20:00","HH:mm"),working:!0,"default":!0},noon:{start:moment("12:00","HH:mm"),end:moment("13:30","HH:mm"),working:!1,"default":!0},weekend:{working:!1}},dateFrames:{weekend:{evaluator:function(date){return 6===date.isoWeekday()||7===date.isoWeekday()},targets:["weekend"]}},timeFramesNonWorkingMode:"visible",columnMagnet:"5 minutes"},$scope.$watch("fromDate+toDate",function(){$scope.options.fromDate=$scope.fromDate,$scope.options.toDate=$scope.toDate}),$scope.$watch("options.scale",function(newValue,oldValue){angular.equals(newValue,oldValue)||("quarter"===newValue?($scope.options.headersFormats={quarter:"[Q]Q YYYY"},$scope.options.headers=["quarter"]):($scope.options.headersFormats=void 0,$scope.options.headers=void 0))}),$scope.$on(GANTT_EVENTS.READY,function(){$scope.addSamples(),$timeout(function(){$scope.scrollToDate($scope.options.currentDateValue)},0,!0)}),$scope.addSamples=function(){$scope.loadTimespans(Sample.getSampleTimespans().timespan1),$scope.loadData(Sample.getSampleData().data1)},$scope.removeSomeSamples=function(){$scope.removeData([{id:"c65c2672-445d-4297-a7f2-30de241b3145"},{id:"2f85dbeb-0845-404e-934e-218bf39750c0",tasks:[{id:"f55549b5-e449-4b0c-9f4b-8b33381f7d76"},{id:"5e997eb3-4311-46b1-a1b4-7e8663ea8b0b"},{id:"6fdfd775-7b22-42ec-a12c-21a64c9e7a9e"}]},{id:"cfb29cd5-1737-4027-9778-bb3058fbed9c",tasks:[{id:"57638ba3-dfff-476d-ab9a-30fda1e44b50"}]}])},$scope.removeSamples=function(){$scope.clearData()};var handleClickEvent=function(event,data){if($scope.open(),!$scope.options.readOnly&&$scope.options.draw&&(data.evt.target?data.evt.target:data.evt.srcElement).className.indexOf("gantt-row")>-1){var startDate=data.date,endDate=moment(startDate),infoTask={id:Uuid.randomUuid(),name:"Drawn task",from:startDate,to:endDate,color:"#AA8833"},task=data.row.addTask(infoTask);task.isCreating=!0,$scope.$apply(function(){task.updatePosAndSize(),data.row.updateVisibleTasks()})}},logScrollEvent=function(event,data){angular.equals(data.direction,"left")?console.log("Scroll event: Left "+data.left):angular.equals(data.direction,"right")&&console.log("Scroll event: Right")},logTaskEvent=function(event,data){var output="";for(var property in data){var propertyValue=data[property];"evt"===property&&propertyValue?propertyValue=propertyValue.type:"element"===property&&propertyValue.length>0?propertyValue=propertyValue[0].localName+(propertyValue[0].className?"."+propertyValue[0].className:""):"task"===property?propertyValue=propertyValue.name:"timespan"===property?propertyValue=propertyValue.name:"column"===property?propertyValue=propertyValue.date.format()+" <---> "+propertyValue.endDate.format():"row"===property?propertyValue=propertyValue.name:"date"===property&&(propertyValue=propertyValue.format()),output+=property+": "+propertyValue+"; "}console.log("$scope.$on: "+event.name+": "+output)};$scope.$on(GANTT_EVENTS.TASK_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_DBL_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_CONTEXTMENU,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_ADDED,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_CHANGED,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_REMOVED,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_MOVE_BEGIN,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_MOVE_END,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_RESIZE_BEGIN,logTaskEvent),$scope.$on(GANTT_EVENTS.TASK_RESIZE_END,logTaskEvent),$scope.$on(GANTT_EVENTS.COLUMN_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.COLUMN_DBL_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.COLUMN_CONTEXTMENU,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_MOUSEDOWN,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_MOUSEUP,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_CLICKED,handleClickEvent),$scope.$on(GANTT_EVENTS.ROW_DBL_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_CONTEXTMENU,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_ORDER_CHANGED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_CHANGED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_ADDED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_REMOVED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_LABEL_MOUSEDOWN,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_LABEL_MOUSEUP,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_LABEL_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_LABEL_DBL_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_LABEL_CONTEXTMENU,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_HEADER_MOUSEDOWN,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_HEADER_MOUSEUP,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_HEADER_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_HEADER_DBL_CLICKED,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_HEADER_CONTEXTMENU,logTaskEvent),$scope.$on(GANTT_EVENTS.ROW_LABELS_RESIZED,logTaskEvent),$scope.$on(GANTT_EVENTS.TIMESPAN_ADDED,logTaskEvent),$scope.$on(GANTT_EVENTS.TIMESPAN_CHANGED,logTaskEvent),$scope.$on(GANTT_EVENTS.READY,logTaskEvent),$scope.$on(GANTT_EVENTS.SCROLL,logScrollEvent),$scope.$on(GANTT_EVENTS.ROWS_FILTERED,function(event,data){console.log(data),console.log("$scope.$on: "+event.name+": "+data.filteredRows.length+"/"+data.rows.length+" rows displayed.")}),$scope.$on(GANTT_EVENTS.TASKS_FILTERED,function(event,data){console.log("$scope.$on: "+event.name+": "+data.filteredTasks.length+"/"+data.tasks.length+" tasks displayed.")})}]).service("Uuid",function(){return{s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},randomUuid:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()}}}).service("Sample",function(){return{getSampleData:function(){return{}},getSampleTimespans:function(){return{timespan1:[{id:"1",from:new Date(2014,9,21,8,0,0),to:new Date(2014,9,25,15,0,0),name:"Sprint 1 Timespan"}]}}}}).controller("ModalInstanceCtrl",function($scope,$modalInstance){$scope.ok=function(){$modalInstance.close($scope.projects)},$scope.cancel=function(){$modalInstance.dismiss("cancel")}}),angular.module("calendarizes").controller("WorkersController",["$scope","$stateParams","$location","Authentication","Apicall",function($scope,$stateParams,$location,Authentication,Apicall){$scope.authentication=Authentication,$scope.workers=[],$scope.worker={},$scope.assignments=Apicall.Assignments.query(),$scope.addWorker=function(){var worker=new Apicall.Workers($scope.worker);worker.$save(function(response){$scope.workers.push(response),$scope.msg="Worker Successfully added",$scope.worker=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.removeAssignment=function(i){$scope.assignments[i].splice(0,1)},$scope.updateWorker=function(){var worker=$scope.worker;worker.$update(function(){},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.selectWorker=function(worker){$scope.worker=worker},$scope.assignProject=function(){var assignment=new Apicall.Assignments({project:this.project,worker:this.worker,startDate:this.startDate,endDate:this.endDate,user:this.user,created:this.created});assignment.$save(function(response){$scope.assignments.push(response)})}}]),angular.module("calendarizes").controller("ProjectsController",["$scope","$stateParams","$location","Authentication","Apicall",function($scope,$stateParams,$location,Authentication,Apicall){$scope.authentication=Authentication,$scope.addProject=function(){var project=new Apicall.Projects($scope.project);project.$save(function(response){console.log(response),$scope.project=""},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.removeProject=function(project){if(project){project.$remove();for(var i in $scope.projects)$scope.projects[i]===project&&$scope.projects.splice(i,1)}else $scope.project.$remove(function(){})},$scope.updateProject=function(){var project=$scope.project;project.$update(function(){},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.findProjects=function(){$scope.projects=Apicall.Projects.query()},$scope.findOneProject=function(){$scope.project=Apicall.Projects.get({projectId:$stateParams.projectId})},$scope.inactivateProject=function(){var project=$scope.project;project.isactive=!1,project.$update(function(){$location.path("projects/"+project._id)},function(errorResponse){$scope.error=errorResponse.data.message})},$scope.inactivateProject=function(){var project=$scope.project;project.isactive=!0,project.$update(function(){$location.path("projects/"+project._id)},function(errorResponse){$scope.error=errorResponse.data.message})}}]),angular.module("calendarizes").factory("Apicall",["$resource",function($resource){return{Persons:$resource("persons/:personId",{personId:"@_id"},{update:{method:"PUT"}}),Projects:$resource("projects/:projectId",{projectId:"@_id"},{update:{method:"PUT"}}),Tasks:$resource("tasks/:taskId",{projectId:"@_id"},{update:{method:"PUT"}})}}]),angular.module("core").config(["$stateProvider","$urlRouterProvider",function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/"),$stateProvider.state("home",{url:"/",templateUrl:"modules/core/views/home.client.view.html"})}]),angular.module("core").controller("HeaderController",["$scope","Authentication","Menus",function($scope,Authentication,Menus){$scope.authentication=Authentication,$scope.isCollapsed=!1,$scope.menu=Menus.getMenu("topbar"),$scope.toggleCollapsibleMenu=function(){$scope.isCollapsed=!$scope.isCollapsed},$scope.$on("$stateChangeSuccess",function(){$scope.isCollapsed=!1})}]),angular.module("core").controller("HomeController",["$scope","Authentication",function($scope,Authentication){$scope.authentication=Authentication}]),angular.module("core").service("Menus",[function(){this.defaultRoles=["*"],this.menus={};var shouldRender=function(user){if(!user)return this.isPublic;if(~this.roles.indexOf("*"))return!0;for(var userRoleIndex in user.roles)for(var roleIndex in this.roles)if(this.roles[roleIndex]===user.roles[userRoleIndex])return!0;return!1};this.validateMenuExistance=function(menuId){if(menuId&&menuId.length){if(this.menus[menuId])return!0;throw new Error("Menu does not exists")}throw new Error("MenuId was not provided")},this.getMenu=function(menuId){return this.validateMenuExistance(menuId),this.menus[menuId]},this.addMenu=function(menuId,isPublic,roles){return this.menus[menuId]={isPublic:isPublic||!1,roles:roles||this.defaultRoles,items:[],shouldRender:shouldRender},this.menus[menuId]},this.removeMenu=function(menuId){this.validateMenuExistance(menuId),delete this.menus[menuId]},this.addMenuItem=function(menuId,menuItemTitle,menuItemURL,menuItemType,menuItemUIRoute,isPublic,roles,position){return this.validateMenuExistance(menuId),this.menus[menuId].items.push({title:menuItemTitle,link:menuItemURL,menuItemType:menuItemType||"item",menuItemClass:menuItemType,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].roles:roles,position:position||0,items:[],shouldRender:shouldRender}),this.menus[menuId]},this.addSubMenuItem=function(menuId,rootMenuItemURL,menuItemTitle,menuItemURL,menuItemUIRoute,isPublic,roles,position){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===rootMenuItemURL&&this.menus[menuId].items[itemIndex].items.push({title:menuItemTitle,link:menuItemURL,uiRoute:menuItemUIRoute||"/"+menuItemURL,isPublic:null===isPublic||"undefined"==typeof isPublic?this.menus[menuId].items[itemIndex].isPublic:isPublic,roles:null===roles||"undefined"==typeof roles?this.menus[menuId].items[itemIndex].roles:roles,position:position||0,shouldRender:shouldRender});return this.menus[menuId]},this.removeMenuItem=function(menuId,menuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)this.menus[menuId].items[itemIndex].link===menuItemURL&&this.menus[menuId].items.splice(itemIndex,1);return this.menus[menuId]},this.removeSubMenuItem=function(menuId,submenuItemURL){this.validateMenuExistance(menuId);for(var itemIndex in this.menus[menuId].items)for(var subitemIndex in this.menus[menuId].items[itemIndex].items)this.menus[menuId].items[itemIndex].items[subitemIndex].link===submenuItemURL&&this.menus[menuId].items[itemIndex].items.splice(subitemIndex,1);return this.menus[menuId]},this.addMenu("topbar")}]),angular.module("users").config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push(["$q","$location","Authentication",function($q,$location,Authentication){return{responseError:function(rejection){switch(rejection.status){case 401:Authentication.user=null,$location.path("signin");break;case 403:}return $q.reject(rejection)}}}])}]),angular.module("users").config(["$stateProvider",function($stateProvider){$stateProvider.state("profile",{url:"/settings/profile",templateUrl:"modules/users/views/settings/edit-profile.client.view.html"}).state("password",{url:"/settings/password",templateUrl:"modules/users/views/settings/change-password.client.view.html"}).state("accounts",{url:"/settings/accounts",templateUrl:"modules/users/views/settings/social-accounts.client.view.html"}).state("signup",{url:"/signup",templateUrl:"modules/users/views/authentication/signup.client.view.html"}).state("signin",{url:"/signin",templateUrl:"modules/users/views/authentication/signin.client.view.html"}).state("forgot",{url:"/password/forgot",templateUrl:"modules/users/views/password/forgot-password.client.view.html"}).state("reset-invlaid",{url:"/password/reset/invalid",templateUrl:"modules/users/views/password/reset-password-invalid.client.view.html"}).state("reset-success",{url:"/password/reset/success",templateUrl:"modules/users/views/password/reset-password-success.client.view.html"}).state("reset",{url:"/password/reset/:token",templateUrl:"modules/users/views/password/reset-password.client.view.html"})}]),angular.module("users").controller("AuthenticationController",["$scope","$http","$location","Authentication",function($scope,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.signup=function(){$http.post("/auth/signup",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})},$scope.signin=function(){$http.post("/auth/signin",$scope.credentials).success(function(response){$scope.authentication.user=response,$location.path("/")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("PasswordController",["$scope","$stateParams","$http","$location","Authentication",function($scope,$stateParams,$http,$location,Authentication){$scope.authentication=Authentication,$scope.authentication.user&&$location.path("/"),$scope.askForPasswordReset=function(){$scope.success=$scope.error=null,$http.post("/auth/forgot",$scope.credentials).success(function(response){$scope.credentials=null,$scope.success=response.message}).error(function(response){$scope.credentials=null,$scope.error=response.message})},$scope.resetUserPassword=function(){$scope.success=$scope.error=null,$http.post("/auth/reset/"+$stateParams.token,$scope.passwordDetails).success(function(response){$scope.passwordDetails=null,Authentication.user=response,$location.path("/password/reset/success")}).error(function(response){$scope.error=response.message})}}]),angular.module("users").controller("SettingsController",["$scope","$http","$location","Users","Authentication",function($scope,$http,$location,Users,Authentication){$scope.user=Authentication.user,$scope.user||$location.path("/"),$scope.hasConnectedAdditionalSocialAccounts=function(){for(var i in $scope.user.additionalProvidersData)return!0;return!1},$scope.isConnectedSocialAccount=function(provider){return $scope.user.provider===provider||$scope.user.additionalProvidersData&&$scope.user.additionalProvidersData[provider]},$scope.removeUserSocialAccount=function(provider){$scope.success=$scope.error=null,$http.delete("/users/accounts",{params:{provider:provider}}).success(function(response){$scope.success=!0,$scope.user=Authentication.user=response}).error(function(response){$scope.error=response.message})},$scope.updateUserProfile=function(isValid){if(isValid){$scope.success=$scope.error=null;var user=new Users($scope.user);user.$update(function(response){$scope.success=!0,Authentication.user=response},function(response){$scope.error=response.data.message})}else $scope.submitted=!0},$scope.changeUserPassword=function(){$scope.success=$scope.error=null,$http.post("/users/password",$scope.passwordDetails).success(function(){$scope.success=!0,$scope.passwordDetails=null}).error(function(response){$scope.error=response.message})}}]),angular.module("users").factory("Authentication",[function(){var _this=this;return _this._data={user:window.user},_this._data}]),angular.module("users").factory("Users",["$resource",function($resource){return $resource("users",{},{update:{method:"PUT"}})}]);